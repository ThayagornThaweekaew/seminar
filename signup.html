<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Signup</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="wrap">
    <section class="panel">
      <h1 class="title">Create an account</h1>
      <p class="muted">Join us to get started</p>

      <form id="signupForm" class="grid">
        <label class="field">
          <span class="label">Username</span>
          <input class="input" type="text" name="name" placeholder="Username" required />
        </label>

        <label class="field">
          <span class="label">Email</span>
          <input class="input" type="email" name="email" placeholder="you@example.com" required />
        </label>

        <label class="field">
          <span class="label">Password</span>
          <input class="input" type="password" id="password" placeholder="••••••••" minlength="8" required />
        </label>

        <label class="field">
          <span class="label">Confirm password</span>
          <input class="input" type="password" id="confirm" placeholder="••••••••" minlength="8" required />
          <small id="matchMsg" style="font-size:13px;color:#ef4444;display:none;">
            Passwords do not match
          </small>
        </label>

        <button class="btn primary" type="submit">Create account</button>

        <p class="new-here">
          Already have an account?
          <a href="index.html" class="btn-ghost">Sign in</a>
        </p>
      </form>
      
    </section>
  </main>

  <script>
    const signupForm = document.getElementById("signupForm");
    const password = document.getElementById("password");
    const confirm = document.getElementById("confirm");
    const matchMsg = document.getElementById("matchMsg");

    confirm.addEventListener("input", () => {
      if (confirm.value !== password.value) {
        matchMsg.style.display = "block";
      } else {
        matchMsg.style.display = "none";
      }
    });

    signupForm.addEventListener("submit", (e) => {
      e.preventDefault();
      if (password.value !== confirm.value) {
        matchMsg.style.display = "block";
        return;
      }

      const name = signupForm.name.value;
      const email = signupForm.email.value;

      let users = JSON.parse(localStorage.getItem("users") || "[]");
      if (users.find(u => u.email === email)) {
        alert("❌ อีเมลนี้ถูกใช้ไปแล้ว");
        return;
      }

      users.push({ name, email, password: password.value });
      localStorage.setItem("users", JSON.stringify(users));

      alert("✅ สมัครสมาชิกสำเร็จ! กรุณาเข้าสู่ระบบ");
      window.location.href = "index.html";
    });
  </script>
</body>
</html>
